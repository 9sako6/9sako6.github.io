{
  "title": "ABC040 D - é“è·¯ã®è€æœ½åŒ–å¯¾ç­–ã«ã¤ã„ã¦ (100ç‚¹)",
  "description": "Union-Findï¼ˆç´ é›†åˆãƒ‡ãƒ¼ã‚¿æ§‹é€ , Disjoint-set Data Structureï¼‰ã‚’ä½¿ã£ã¦è§£ãã€‚ ãŸã ã—ã€å„è³ªå•ã”ã¨ã«Union-Findã‚’æ§‹ç¯‰ã™ã‚‹ã¨é–“ã«åˆã‚ãªã„ã€‚ ãã“ã§ã€...",
  "tags": [
    "ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°",
    "AtCoder",
    "Union-Findæœ¨",
    "Python3",
    "ABC-D"
  ],
  "created_at": "2019-05-22T00:00:00.000Z",
  "updated_at": "2019-05-23T00:00:00.000Z",
  "draft": false,
  "bodyContent": "# å•é¡Œ\n[D - é“è·¯ã®è€æœ½åŒ–å¯¾ç­–ã«ã¤ã„ã¦](https://atcoder.jp/contests/abc040/tasks/abc040_d)\n\n# è§£æ³•\nUnion-Findæœ¨ï¼ˆç´ é›†åˆãƒ‡ãƒ¼ã‚¿æ§‹é€ , Disjoint-set Data Structureï¼‰ã‚’ä½¿ã£ã¦è§£ãã€‚\nãŸã ã—ã€å„è³ªå•ã”ã¨ã«Union-Findæœ¨ã‚’æ§‹ç¯‰ã™ã‚‹ã¨é–“ã«åˆã‚ãªã„ã€‚\nãã“ã§ã€å„è³ªå•ã«ãŠã‘ã‚‹é“ãŒæ–°ã—ã„é †ã«Union-Findæœ¨ã‚’æ§‹ç¯‰ã—ã¦ã„ãã€‚ã“ã®å·¥å¤«ãŒæœ¬å•é¡Œã®è‚ã§ã‚ã‚‹ã€‚\né“ãŒæ–°ã—ã„é †ã«Union-Findæœ¨ã‚’æ§‹ç¯‰ã—ã¦ã„ãã¨ã€æ¬¡ã®è³ªå•ã«ç­”ãˆã‚‹æ™‚ã«é“ãŒå¢—ãˆã‚‹ã“ã¨ãŒã‚ã£ã¦ã‚‚æ¸›ã‚‹ã“ã¨ã¯ãªã„ã€‚\n\n```python\nfrom sys import stdin\ndef input():\n    return stdin.readline()[:-1]\n \nclass UnionFind:\n    def __init__(self, n):\n        self.parent = [-1 for _ in range(n)]\n \n    def root(self, x):\n        if self.parent[x] < 0:\n            return x\n        self.parent[x] = self.root(self.parent[x])\n        return self.parent[x]\n \n    def size(self, x):\n        return -self.parent[self.root(x)]\n \n    def merge(self, x, y):\n        x = self.root(x)\n        y = self.root(y)\n        if x == y:\n            return False\n \n        if self.size(x) < self.size(y):\n            x, y = y, x\n        self.parent[x] += self.parent[y]\n        self.parent[y] = x\n        return True\n \nN,M=map(int, input().split())\naby=[list(map(int, input().split())) for _ in range(M)]\nQ=int(input())\nivw = [[i] + list(map(int, input().split())) for i in range(Q)]\n \naby.sort(key=lambda x: x[2], reverse=True)\nivw.sort(key=lambda x: x[2], reverse=True)\n \nans = [0]*Q\nuf = UnionFind(N)\nj = 0\nfor i,v,w in ivw:\n    while j < M and w < aby[j][2]:\n        uf.merge(aby[j][0]-1, aby[j][1]-1)\n        j += 1\n    ans[i] = uf.size(v-1)\n \nprint('\\n'.join(map(str, ans)))\n```\n\n# å­¦ã³\nPythonã§æŒ‘æˆ¦ã—ã¦TLEã«è‹¦ã—ã¿ã¾ã—ãŸãŒã€\n`input()`ã§ã¯ãªã`sys.stdin.readline()`ã‚’ä½¿ã†ã‚ˆã†ã«ã—ãŸã ã‘ã§é€šã‚Šã¾ã—ãŸã€‚ã¨ã¯ã„ãˆã‚³ãƒ¼ãƒ‰ã«æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šãã†ã€‚\n\n@@\n<blockquote class=\"twitter-tweet\" data-lang=\"ja\"><p lang=\"ja\" dir=\"ltr\">ãˆãˆãˆãˆãˆãˆãˆãˆ<br>input()ã®ä»£ã‚ã‚Šã«stdin.readline()ä½¿ã£ãŸã ã‘ã§é€šã£ãŸ<br>ãˆãˆãˆãˆãˆãˆãˆãˆãˆãˆãˆ <a href=\"https://t.co/WEQiQ9Np1E\">pic.twitter.com/WEQiQ9Np1E</a></p>&mdash; ğŸŒ¾ãã•ã“ã‚ğŸŒ¾ (@9sako6) <a href=\"https://twitter.com/9sako6/status/1122073726894260225?ref_src=twsrc%5Etfw\">2019å¹´4æœˆ27æ—¥</a></blockquote>\n<script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n@@",
  "bodyHtml": "<h1>å•é¡Œ</h1>\n<p><a href=\"https://atcoder.jp/contests/abc040/tasks/abc040_d\">D - é“è·¯ã®è€æœ½åŒ–å¯¾ç­–ã«ã¤ã„ã¦</a></p>\n<h1>è§£æ³•</h1>\n<p>Union-Findæœ¨ï¼ˆç´ é›†åˆãƒ‡ãƒ¼ã‚¿æ§‹é€ , Disjoint-set Data Structureï¼‰ã‚’ä½¿ã£ã¦è§£ãã€‚\nãŸã ã—ã€å„è³ªå•ã”ã¨ã«Union-Findæœ¨ã‚’æ§‹ç¯‰ã™ã‚‹ã¨é–“ã«åˆã‚ãªã„ã€‚\nãã“ã§ã€å„è³ªå•ã«ãŠã‘ã‚‹é“ãŒæ–°ã—ã„é †ã«Union-Findæœ¨ã‚’æ§‹ç¯‰ã—ã¦ã„ãã€‚ã“ã®å·¥å¤«ãŒæœ¬å•é¡Œã®è‚ã§ã‚ã‚‹ã€‚\né“ãŒæ–°ã—ã„é †ã«Union-Findæœ¨ã‚’æ§‹ç¯‰ã—ã¦ã„ãã¨ã€æ¬¡ã®è³ªå•ã«ç­”ãˆã‚‹æ™‚ã«é“ãŒå¢—ãˆã‚‹ã“ã¨ãŒã‚ã£ã¦ã‚‚æ¸›ã‚‹ã“ã¨ã¯ãªã„ã€‚</p>\n<pre><code class=\"hljs\"><span class=\"hljs-keyword\">from</span> sys <span class=\"hljs-keyword\">import</span> stdin\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">input</span><span class=\"hljs-params\">()</span>:</span>\n    <span class=\"hljs-keyword\">return</span> stdin.readline()[:<span class=\"hljs-number\">-1</span>]\n \n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">UnionFind</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, n)</span>:</span>\n        self.parent = [<span class=\"hljs-number\">-1</span> <span class=\"hljs-keyword\">for</span> _ <span class=\"hljs-keyword\">in</span> range(n)]\n \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">root</span><span class=\"hljs-params\">(self, x)</span>:</span>\n        <span class=\"hljs-keyword\">if</span> self.parent[x] &lt; <span class=\"hljs-number\">0</span>:\n            <span class=\"hljs-keyword\">return</span> x\n        self.parent[x] = self.root(self.parent[x])\n        <span class=\"hljs-keyword\">return</span> self.parent[x]\n \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">size</span><span class=\"hljs-params\">(self, x)</span>:</span>\n        <span class=\"hljs-keyword\">return</span> -self.parent[self.root(x)]\n \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">merge</span><span class=\"hljs-params\">(self, x, y)</span>:</span>\n        x = self.root(x)\n        y = self.root(y)\n        <span class=\"hljs-keyword\">if</span> x == y:\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">False</span>\n \n        <span class=\"hljs-keyword\">if</span> self.size(x) &lt; self.size(y):\n            x, y = y, x\n        self.parent[x] += self.parent[y]\n        self.parent[y] = x\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">True</span>\n \nN,M=map(int, input().split())\naby=[list(map(int, input().split())) <span class=\"hljs-keyword\">for</span> _ <span class=\"hljs-keyword\">in</span> range(M)]\nQ=int(input())\nivw = [[i] + list(map(int, input().split())) <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(Q)]\n \naby.sort(key=<span class=\"hljs-keyword\">lambda</span> x: x[<span class=\"hljs-number\">2</span>], reverse=<span class=\"hljs-literal\">True</span>)\nivw.sort(key=<span class=\"hljs-keyword\">lambda</span> x: x[<span class=\"hljs-number\">2</span>], reverse=<span class=\"hljs-literal\">True</span>)\n \nans = [<span class=\"hljs-number\">0</span>]*Q\nuf = UnionFind(N)\nj = <span class=\"hljs-number\">0</span>\n<span class=\"hljs-keyword\">for</span> i,v,w <span class=\"hljs-keyword\">in</span> ivw:\n    <span class=\"hljs-keyword\">while</span> j &lt; M <span class=\"hljs-keyword\">and</span> w &lt; aby[j][<span class=\"hljs-number\">2</span>]:\n        uf.merge(aby[j][<span class=\"hljs-number\">0</span>]<span class=\"hljs-number\">-1</span>, aby[j][<span class=\"hljs-number\">1</span>]<span class=\"hljs-number\">-1</span>)\n        j += <span class=\"hljs-number\">1</span>\n    ans[i] = uf.size(v<span class=\"hljs-number\">-1</span>)\n \nprint(<span class=\"hljs-string\">'\\n'</span>.join(map(str, ans)))</code></pre><h1>å­¦ã³</h1>\n<p>Pythonã§æŒ‘æˆ¦ã—ã¦TLEã«è‹¦ã—ã¿ã¾ã—ãŸãŒã€\n<code>input()</code>ã§ã¯ãªã<code>sys.stdin.readline()</code>ã‚’ä½¿ã†ã‚ˆã†ã«ã—ãŸã ã‘ã§é€šã‚Šã¾ã—ãŸã€‚ã¨ã¯ã„ãˆã‚³ãƒ¼ãƒ‰ã«æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šãã†ã€‚</p>\n<p>@@\n&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;ja&quot;&gt;&lt;p lang=&quot;ja&quot; dir=&quot;ltr&quot;&gt;ãˆãˆãˆãˆãˆãˆãˆãˆ&lt;br&gt;input()ã®ä»£ã‚ã‚Šã«stdin.readline()ä½¿ã£ãŸã ã‘ã§é€šã£ãŸ&lt;br&gt;ãˆãˆãˆãˆãˆãˆãˆãˆãˆãˆãˆ &lt;a href=&quot;https://t.co/WEQiQ9Np1E&quot;&gt;pic.twitter.com/WEQiQ9Np1E&lt;/a&gt;&lt;/p&gt;â€” ğŸŒ¾ãã•ã“ã‚ğŸŒ¾ (@9sako6) &lt;a href=&quot;https://twitter.com/9sako6/status/1122073726894260225?ref_src=twsrc%5Etfw&quot;&gt;2019å¹´4æœˆ27æ—¥&lt;/a&gt;&lt;/blockquote&gt;\n&lt;script async src=&quot;https://platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;\n@@</p>\n",
  "dir": "contents/posts",
  "base": "2019-05-22-abc040_d.json",
  "ext": ".json",
  "sourceBase": "2019-05-22-abc040_d.md",
  "sourceExt": ".md"
}